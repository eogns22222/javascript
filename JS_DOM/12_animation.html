<html>
    <head>
        <meta charset="UTF-8">
        <title>DOM SCRIPT</title>
        <link rel="icon" href="../img/img01.jpg">
        <style>
            #count{
                color: red;
            }
            progress{
                display:none;
                width: 500px;
                height: 25px;
            }
            #proc{
                display:none;
                position: absolute;
                top: 100px;
                left: 10px;
                width: 10px;
                height: 10px;
                background: red;
            }
        </style>
    </head>
    <body>
        <h1><span id="count">5</span>초 후에 다운로드가 진행됩니다.</h1>
        <progress id="download" max="100" value="0"></progress>
        <div id="proc"></div>
    </body>
    <script>
        
        var tit = document.getElementsByTagName('h1');
        var cnt = document.getElementById('count');
        var down = document.getElementById('download');
        var proc = document.getElementById('proc');
        var i = 5;
        var i2 = 0;
        var i3 = 10;
        var i4 = 0;
        var count;
        var bar;

        count = setInterval(function(){
            i--;
            cnt.innerHTML = i;
            if(i == 0){
                clearInterval(count);
            }
        }, 1000);

        setTimeout(function(){
            down.style.display = 'block';
            proc.style.display = 'block';
            tit[0].innerHTML = '다운로드 진행중 (' + i4 + '%)';
            bar = setInterval(function(){
                i2 = i2 + 20;
                i4 = i4 + 20;
                i3 = i3 + 100;
                down.value = i2;
                proc.style.left = i3;
                tit[0].innerHTML = '다운로드 진행중 (' + i4 + '%)';
                if(down.value >= 100){
                    tit[0].innerHTML = '다운로드 완료';
                    clearInterval(bar);
                }
            }, 1000);
        }, 5000);
    </script>
</html>